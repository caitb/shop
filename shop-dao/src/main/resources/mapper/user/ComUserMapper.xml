<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.masiis.shop.dao.platform.user.ComUserMapper" >
    <resultMap id="BaseResultMap" type="com.masiis.shop.dao.po.ComUser" >
        <id column="id" property="id" jdbcType="BIGINT" />
        <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
        <result column="openid" property="openid" jdbcType="VARCHAR" />
        <result column="wx_nk_name" property="wxNkName" jdbcType="VARCHAR" />
        <result column="wx_id" property="wxId" jdbcType="VARCHAR" />
        <result column="wx_head_img" property="wxHeadImg" jdbcType="VARCHAR" />
        <result column="access_token" property="accessToken" jdbcType="VARCHAR" />
        <result column="refresh_token" property="refreshToken" jdbcType="VARCHAR" />
        <result column="atoken_expire" property="atokenExpire" jdbcType="TIMESTAMP" />
        <result column="rtoken_expire" property="rtokenExpire" jdbcType="TIMESTAMP" />
        <result column="real_name" property="realName" jdbcType="VARCHAR" />
        <result column="mobile" property="mobile" jdbcType="VARCHAR" />
        <result column="id_card" property="idCard" jdbcType="VARCHAR" />
        <result column="id_card_front_url" property="idCardFrontUrl" jdbcType="VARCHAR" />
        <result column="id_card_back_url" property="idCardBackUrl" jdbcType="VARCHAR" />
        <result column="province_id" property="provinceId" jdbcType="INTEGER" />
        <result column="province_name" property="provinceName" jdbcType="VARCHAR" />
        <result column="city_id" property="cityId" jdbcType="INTEGER" />
        <result column="city_name" property="cityName" jdbcType="VARCHAR" />
        <result column="region_id" property="regionId" jdbcType="INTEGER" />
        <result column="region_name" property="regionName" jdbcType="VARCHAR" />
        <result column="address" property="address" jdbcType="VARCHAR" />
        <result column="is_agent" property="isAgent" jdbcType="INTEGER" />
        <result column="sex" property="sex" jdbcType="INTEGER" />
    </resultMap>

    <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
        delete from com_user
        where id = #{id,jdbcType=BIGINT}
    </delete>

    <insert id="insert" parameterType="com.masiis.shop.dao.po.ComUser" >
        insert into com_user (id, create_time, openid,
        wx_nk_name, wx_id, wx_head_img,
        access_token, refresh_token, atoken_expire,
        rtoken_expire, real_name, mobile,
        id_card, id_card_front_url, id_card_back_url,
        province_id, province_name, city_id,
        city_name, region_id, region_name,
        address, is_agent, sex
        )
        values (#{id,jdbcType=BIGINT}, #{createTime,jdbcType=TIMESTAMP}, #{openid,jdbcType=VARCHAR},
        #{wxNkName,jdbcType=VARCHAR}, #{wxId,jdbcType=VARCHAR}, #{wxHeadImg,jdbcType=VARCHAR},
        #{accessToken,jdbcType=VARCHAR}, #{refreshToken,jdbcType=VARCHAR}, #{atokenExpire,jdbcType=TIMESTAMP},
        #{rtokenExpire,jdbcType=TIMESTAMP}, #{realName,jdbcType=VARCHAR}, #{mobile,jdbcType=VARCHAR},
        #{idCard,jdbcType=VARCHAR}, #{idCardFrontUrl,jdbcType=VARCHAR}, #{idCardBackUrl,jdbcType=VARCHAR},
        #{provinceId,jdbcType=INTEGER}, #{provinceName,jdbcType=VARCHAR}, #{cityId,jdbcType=INTEGER},
        #{cityName,jdbcType=VARCHAR}, #{regionId,jdbcType=INTEGER}, #{regionName,jdbcType=VARCHAR},
        #{address,jdbcType=VARCHAR}, #{isAgent,jdbcType=INTEGER}, #{sex,jdbcType=INTEGER}
        )
    </insert>

    <update id="updateByPrimaryKey" parameterType="com.masiis.shop.dao.po.ComUser" >
        update com_user
        set create_time = #{createTime,jdbcType=TIMESTAMP},
        openid = #{openid,jdbcType=VARCHAR},
        wx_nk_name = #{wxNkName,jdbcType=VARCHAR},
        wx_id = #{wxId,jdbcType=VARCHAR},
        wx_head_img = #{wxHeadImg,jdbcType=VARCHAR},
        access_token = #{accessToken,jdbcType=VARCHAR},
        refresh_token = #{refreshToken,jdbcType=VARCHAR},
        atoken_expire = #{atokenExpire,jdbcType=TIMESTAMP},
        rtoken_expire = #{rtokenExpire,jdbcType=TIMESTAMP},
        real_name = #{realName,jdbcType=VARCHAR},
        mobile = #{mobile,jdbcType=VARCHAR},
        id_card = #{idCard,jdbcType=VARCHAR},
        id_card_front_url = #{idCardFrontUrl,jdbcType=VARCHAR},
        id_card_back_url = #{idCardBackUrl,jdbcType=VARCHAR},
        province_id = #{provinceId,jdbcType=INTEGER},
        province_name = #{provinceName,jdbcType=VARCHAR},
        city_id = #{cityId,jdbcType=INTEGER},
        city_name = #{cityName,jdbcType=VARCHAR},
        region_id = #{regionId,jdbcType=INTEGER},
        region_name = #{regionName,jdbcType=VARCHAR},
        address = #{address,jdbcType=VARCHAR},
        is_agent = #{isAgent,jdbcType=INTEGER},
        sex = #{sex,jdbcType=INTEGER}
        where id = #{id,jdbcType=BIGINT}
    </update>

    <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Long" >
        select id, create_time, openid, wx_nk_name, wx_id, wx_head_img, access_token, refresh_token,
        atoken_expire, rtoken_expire, real_name, mobile, id_card, id_card_front_url, id_card_back_url,
        province_id, province_name, city_id, city_name, region_id, region_name, address,
        is_agent, sex
        from com_user
        where id = #{id,jdbcType=BIGINT}
    </select>
    <select id="findByParentId" resultType="String" parameterType="java.lang.Long" >
        select cu.real_name from sf_user_relation sur
        left join com_user cu on cu.id = sur.parent_user_id
        and sur.user_id = #{userId,jdbcType=BIGINT}
    </select>



    <select id="selectAll" resultMap="BaseResultMap" >
        select id, create_time, openid, wx_nk_name, wx_id, wx_head_img, access_token, refresh_token,
        atoken_expire, rtoken_expire, real_name, mobile, id_card, id_card_front_url, id_card_back_url,
        province_id, province_name, city_id, city_name, region_id, region_name, address,
        is_agent, sex
        from com_user
    </select>

    <select id="selectByMobile" resultMap="BaseResultMap" parameterType="java.lang.Long" >
        select id, create_time, openid, wx_nk_name, wx_id, wx_head_img, access_token, refresh_token,
        atoken_expire, rtoken_expire, real_name, mobile, id_card, id_card_front_url, id_card_back_url,
        province_id, province_name, city_id, city_name, region_id, region_name, address,
        is_agent, sex
        from com_user
        where mobile = #{mobile,jdbcType=VARCHAR}
    </select>

</mapper>